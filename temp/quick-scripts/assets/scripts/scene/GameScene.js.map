{"version":3,"sources":["GameScene.js"],"names":["SHAKE","ACTION_TIME","cc","Class","extends","Component","properties","panel","Node","cellPF","Prefab","scoreLabel","Label","bestLabel","score","default","type","Integer","notify","string","zy","dataMng","userData","bestScore","init","params","reloadCell","start","node","on","EventType","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","TOUCH_CANCEL","systemEvent","SystemEvent","KEY_DOWN","onKeyDown","moved","moving","destroyAllChildren","boardCells","board","row","colsData","cols","col","push","randomCell","getPanelPos","v2","event","startPos","getStartLocation","cur","getLocation","diff","subSelf","Math","abs","x","y","moveRight","moveLeft","moveUp","moveDown","keyCode","macro","KEY","up","down","left","right","i","round","random","j","log","cell","instantiate","parent","position","getComponent","num","bg","scale","runAction","scaleTo","canMoveUp","canMoveDown","canMoveLeft","canMoveRight","tmp","k","noBlockVertical","moveActionVertical","noBlockHorizonal","moveActionHorizonal","hasNewValue","stopAllActions","sequence","moveTo","callFunc","delayTime","destroy","getGameResult","col1","col2","row1","row2","showGameSuc","ui","alert","show","text","okText","okCb","showGameFail","lastValue","getIsGameOver"],"mappings":"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","file":"GameScene.js","sourceRoot":"../../../../../assets/scripts/scene","sourcesContent":["/**\n * Created by xujiawei on 2020-04-29 17:37:50\n */\n\nconst SHAKE = 10;  // 滑动阀值\nconst ACTION_TIME = 0.1; // cell移动时间\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        panel: cc.Node,\n        cellPF: cc.Prefab,\n        scoreLabel: cc.Label,\n        bestLabel: cc.Label,\n        score: {\n            default: 0,\n            type: cc.Integer,\n            notify() {\n                this.scoreLabel.string = this.score;\n\n                if (this.score > zy.dataMng.userData.bestScore) {\n                    zy.dataMng.userData.bestScore = this.score;\n                    this.bestLabel.string = this.score;\n                }\n            }\n        }\n    },\n\n    init(params) {\n        this.reloadCell();\n        this.bestLabel.string = zy.dataMng.userData.bestScore;\n    },\n\n    start() {\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n    },\n\n    reloadCell() {\n        this.moved = false;  // 标记本次touchmove已经移动过不再计算\n        this.moving = false;   // 执行动画中暂不能移动\n        this.score = 0;\n        this.panel.destroyAllChildren();\n        this.boardCells = []; // 存cell节点\n        this.board = []; // 存数据, 数据是立即改变的，cell存在动作延后\n        for (let row = 0; row < 4; row++) {\n            let colsData = [];\n            let cols = [];\n            for (let col = 0; col < 4; col++) {\n                colsData[col] = 0;\n                cols[col] = null;\n            }\n            this.board.push(colsData);\n            this.boardCells.push(cols);\n        }\n\n        this.randomCell();\n        this.randomCell();\n    },\n\n    getPanelPos(row, col) {\n        return cc.v2(-270 + col * 180, 270 - row * 180);\n    },\n\n    onTouchMove(event) {\n        if (this.moved) {\n            return;\n        }\n        // let pre = event.getPreviousLocation();\n        let startPos = event.getStartLocation();\n        let cur = event.getLocation();\n        let diff = cur.subSelf(startPos);\n        if (Math.abs(diff.x) > Math.abs(diff.y)) {\n            if (Math.abs(diff.x) < SHAKE) {\n                return;\n            }\n            this.moved = true;\n            if (diff.x > 0) {\n                this.moveRight();\n            } else {\n                this.moveLeft();\n            }\n        } else {\n            if (Math.abs(diff.y) < SHAKE) {\n                return;\n            }\n            this.moved = true;\n            if (diff.y > 0) {\n                this.moveUp();\n            } else {\n                this.moveDown();\n            }\n        }\n    },\n\n    onTouchEnd(event) {\n        this.moved = false;\n    },\n\n    onKeyDown(event) {\n        switch (event.keyCode) {\n            case cc.macro.KEY.up:\n                this.moveUp();\n                break;\n            case cc.macro.KEY.down:\n                this.moveDown();\n                break;\n            case cc.macro.KEY.left:\n                this.moveLeft();\n                break;\n            case cc.macro.KEY.right:\n                this.moveRight();\n                break;\n            default:\n                break;\n        }\n    },\n\n    randomCell() {\n        let i = Math.round(Math.random() * 3);\n        let j = Math.round(Math.random() * 3);\n        while (this.board[i][j] != 0) {\n            i = Math.round(Math.random() * 3);\n            j = Math.round(Math.random() * 3);\n        }\n\n        cc.log(\"rpos:\", i, j);\n        this.board[i][j] = 2;\n        let cell = cc.instantiate(this.cellPF);\n        cell.parent = this.panel;\n        cell.position = this.getPanelPos(i, j);\n        cell = cell.getComponent(\"Cell\");\n        this.boardCells[i][j] = cell;\n        cell.num = 2;\n        cell.bg.scale = 0;\n        cell.bg.runAction(cc.scaleTo(ACTION_TIME, 1));\n    },\n\n    canMoveUp() {\n        for (let col = 0; col <= 3; col++) {\n            for (let row = 1; row <= 3; row++) {\n                if (this.board[row][col] != 0) {\n                    if (this.board[row - 1][col] == 0 || this.board[row - 1][col] == this.board[row][col]) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    },\n\n    canMoveDown() {\n        for (let col = 0; col <= 3; col++) {\n            for (let row = 2; row >= 0; row--) {\n                if (this.board[row][col] != 0) {\n                    if (this.board[row + 1][col] == 0 || this.board[row + 1][col] == this.board[row][col]) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    },\n\n    canMoveLeft() {\n        for (let row = 3; row >= 0; row--) {\n            for (let col = 1; col <= 3; col++) {\n                if (this.board[row][col] != 0) {\n                    if (this.board[row][col - 1] == 0 || this.board[row][col - 1] == this.board[row][col]) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    },\n\n    canMoveRight() {\n        for (let row = 3; row >= 0; row--) {\n            for (let col = 2; col >= 0; col--) {\n                if (this.board[row][col] != 0) {\n                    if (this.board[row][col + 1] == 0 || this.board[row][col + 1] == this.board[row][col]) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    },\n\n    moveUp() {\n        cc.log('上滑动');\n        if (!this.canMoveUp()) {\n            return;\n        }\n        if (this.moving) {\n            return;\n        }\n\n        for (let col = 0; col <= 3; col++) {\n            let tmp = 0;\n            for (let row = 0; row <= 3; row++) {\n                if (this.board[row][col] == 0) {\n                    continue;\n                }\n                for (let k = 0 + tmp; k < row; k++) {\n                    if (this.board[k][col] == 0 && this.noBlockVertical(col, k, row)) {\n                        this.board[k][col] = this.board[row][col];\n                        this.board[row][col] = 0;\n                       \n                        this.moveActionVertical(row, col, k, false);\n                    } else if (this.board[k][col] == this.board[row][col] && this.noBlockVertical(col, k, row)) {\n                        this.score += this.board[row][col] * 2;\n                        this.board[k][col] += this.board[row][col];\n                        this.board[row][col] = 0;\n                        tmp++;\n                        \n                        this.moveActionVertical(row, col, k, true);\n                    }\n                }\n            }\n        }\n        this.randomCell();\n    },\n\n    moveDown() {\n        cc.log(\"下滑动\");\n        if (!this.canMoveDown()) {\n            return;\n        }\n        if (this.moving) {\n            return;\n        }\n\n        for (let col = 0; col <= 3; col++) {\n            let tmp = 0;\n            for (let row = 3; row >= 0; row--) {\n                if (this.board[row][col] == 0) {\n                    continue;\n                }\n                for (let k = 3 - tmp; k > row; k--) {\n                    if (this.board[k][col] == 0 && this.noBlockVertical(col, row, k)) {\n                        this.board[k][col] = this.board[row][col];\n                        this.board[row][col] = 0;\n                        \n                        this.moveActionVertical(row, col, k, false);\n                    } else if (this.board[k][col] == this.board[row][col] && this.noBlockVertical(col, row, k)) {\n                        this.score += this.board[row][col] * 2;\n                        this.board[k][col] += this.board[row][col];\n                        this.board[row][col] = 0;\n                        tmp++;\n                       \n                        this.moveActionVertical(row, col, k, true);\n                    }\n                }\n            }\n        }\n        this.randomCell();\n    },\n\n    moveLeft() {\n        cc.log(\"左滑动\");\n        if (!this.canMoveLeft()) {\n            return;\n        }\n        if (this.moving) {\n            return;\n        }\n\n        for (let row = 3; row >= 0; row--) {\n            let tmp = 0;\n            for (let col = 0; col <= 3; col++) {\n                if (this.board[row][col] == 0) {\n                    continue;\n                }\n                for (let k = 0 + tmp; k < col; k++) {\n                    if (this.board[row][k] == 0 && this.noBlockHorizonal(row, k, col)) {\n                        this.board[row][k] = this.board[row][col];\n                        this.board[row][col] = 0;\n                       \n                        this.moveActionHorizonal(row, col, k, false);\n                    } else if (this.board[row][k] == this.board[row][col] && this.noBlockHorizonal(row, col, k)) {\n                        this.score += this.board[row][col] * 2;\n                        this.board[row][k] += this.board[row][col];\n                        this.board[row][col] = 0;\n                        tmp++;\n\n                        this.moveActionHorizonal(row, col, k, true);\n                    }\n                }\n            }\n        }\n        this.randomCell();\n    },\n\n    moveRight() {\n        cc.log('右滑动');\n        if (!this.canMoveRight()) {\n            return;\n        }\n        if (this.moving) {\n            return;\n        }\n\n        for (let row = 3; row >= 0; row--) {\n            let tmp = 0;\n            for (let col = 3; col >= 0; col--) {\n                if (this.board[row][col] == 0) {\n                    continue;\n                }\n                for (let k = 3 - tmp; k > col; k--) {\n                    if (this.board[row][k] == 0 && this.noBlockHorizonal(row, col, k)) {\n                        this.board[row][k] = this.board[row][col];\n                        this.board[row][col] = 0;\n\n                        this.moveActionHorizonal(row, col, k, false);\n                    } else if (this.board[row][k] == this.board[row][col] && this.noBlockHorizonal(row, col, k)) {\n                        this.score += this.board[row][col] * 2;\n                        this.board[row][k] += this.board[row][col];\n                        this.board[row][col] = 0;\n                        tmp++;\n\n                        this.moveActionHorizonal(row, col, k, true);\n                    }\n                }\n            }\n        }\n        this.randomCell();\n    },\n\n    moveActionHorizonal(row, col, k, hasNewValue) {\n        // 处理动画\n        let cell = this.boardCells[row][col];\n        if (cell) {\n            this.boardCells[row][col] = null;\n            cell.node.stopAllActions();\n            this.moving = true;\n            if (hasNewValue) {\n                cell.node.runAction(cc.sequence(cc.moveTo(ACTION_TIME, this.getPanelPos(row, k)), cc.callFunc(() => {\n                    this.boardCells[row][k].num = this.board[row][k];\n                    this.boardCells[row][k].bg.runAction(cc.sequence(cc.scaleTo(ACTION_TIME*0.4,1.2), cc.delayTime(ACTION_TIME*0.2), cc.scaleTo(ACTION_TIME*0.3, 1)));\n                    cell.node.destroy();\n                    this.moving = false;\n                    this.getGameResult(this.board[row][k]);\n                })));\n            } else {\n                this.boardCells[row][k] = cell;\n                cell.node.runAction(cc.sequence(cc.moveTo(ACTION_TIME, this.getPanelPos(row, k)), cc.callFunc(()=>{\n                    this.moving = false;\n                    this.getGameResult(this.board[row][k]);\n                })));\n            }\n        }\n    },\n\n    moveActionVertical(row, col, k, hasNewValue) {\n        let cell = this.boardCells[row][col];\n        if (cell) {\n            this.boardCells[row][col] = null;\n            cell.node.stopAllActions();\n            this.moving = true;\n            if (hasNewValue) {\n                cell.node.runAction(cc.sequence(cc.moveTo(ACTION_TIME, this.getPanelPos(k, col)), cc.callFunc(() => {\n                    this.boardCells[k][col].num = this.board[k][col];\n                    this.boardCells[k][col].bg.runAction(cc.sequence(cc.scaleTo(ACTION_TIME*0.4,1.2), cc.delayTime(ACTION_TIME*0.2), cc.scaleTo(ACTION_TIME*0.3, 1)));\n                    cell.node.destroy();\n                    this.moving = false;\n                    this.getGameResult(this.board[k][col]);\n                })));\n            } else {\n                this.boardCells[k][col] = cell;\n                cell.node.runAction(cc.sequence(cc.moveTo(ACTION_TIME, this.getPanelPos(k, col)), cc.callFunc(()=>{\n                    this.moving = false;\n                    this.getGameResult(this.board[k][col]);\n                })));\n            }\n        }\n    },\n\n    noBlockHorizonal(row, col1, col2) {\n        for (let i = col1 + 1; i < col2; i++) {\n            if (this.board[row][i] != 0) {\n                return false;\n            }\n        }\n        return true;\n    },\n\n    noBlockVertical(col, row1, row2) {\n        for (let i = row1 + 1; i < row2; i++) {\n            if (this.board[i][col] != 0) {\n                return false;\n            }\n        }\n        return true;\n    },\n\n    showGameSuc() {\n        zy.ui.alert.show({\n            text: \"再来一局吧!\",\n            okText: \"确定\",\n            okCb: ()=>{\n                this.reloadCell();\n            }\n        });\n    },\n\n    showGameFail() {\n        zy.ui.alert.show({\n            text: \"游戏失败，再试一次吧!\",\n            okText: \"确定\",\n            okCb: ()=>{\n                this.reloadCell();\n            }\n        })\n    },\n\n    getGameResult(lastValue) {\n        if (lastValue == 2048) {\n            this.showGameSuc();\n            return;\n        }\n        this.getIsGameOver();\n    },\n\n    getIsGameOver() {\n        if (!this.canMoveUp() && !this.canMoveDown() && !this.canMoveLeft() && !this.canMoveRight()) {\n            this.showGameFail();\n        }\n    }\n\n});"]}